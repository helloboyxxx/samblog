<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>445_camera | Yue's Notes</title>
<meta name=keywords content="Computational Photography"><meta name=description content="World Coordinates and Image coordinates
Pinhole Camera Model
$$
x = K \left[
\begin{array}{ll}
R & t
\end{array}
\right] x
$$
x: Image Coordinates: $(u, v, 1)$
K: Intrinsic Matrix $(3 \times 3)$
R: Rotation $(3 \times 3)$
t: Translation $(3 \times 1)$
X: World Coordinates: $(X, Y, Z, 1)$
Basically, from the right side to the leftside, it is transforming a point (1) from the world coordinates to camera coordinates, and then project the point (2) from camera coordinates down to the image plane."><meta name=author content><link rel=canonical href=https://ofuro.me/posts/445_camera/><link crossorigin=anonymous href=/assets/css/stylesheet.3f9c3df41d49c1df83c4f93106bd40eae5ce265f122a1a1a99f034136f7c15f5.css integrity="sha256-P5w99B1Jwd+DxPkxBr1A6uXOJl8SKhoamfA0E298FfU=" rel="preload stylesheet" as=style><link rel=icon href=https://ofuro.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ofuro.me/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ofuro.me/favicon-32x32.png><link rel=apple-touch-icon href=https://ofuro.me/apple-touch-icon.png><link rel=mask-icon href=https://ofuro.me/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ofuro.me/posts/445_camera/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.onload=function(){MathJax.typesetPromise().then(()=>{console.log("MathJax rendering complete.")})}</script><script src=//yihui.org/js/math-code.js defer></script><meta property="og:url" content="https://ofuro.me/posts/445_camera/"><meta property="og:site_name" content="Yue's Notes"><meta property="og:title" content="445_camera"><meta property="og:description" content="World Coordinates and Image coordinates Pinhole Camera Model $$ x = K \left[ \begin{array}{ll} R & t \end{array} \right] x $$
x: Image Coordinates: $(u, v, 1)$ K: Intrinsic Matrix $(3 \times 3)$ R: Rotation $(3 \times 3)$ t: Translation $(3 \times 1)$ X: World Coordinates: $(X, Y, Z, 1)$
Basically, from the right side to the leftside, it is transforming a point (1) from the world coordinates to camera coordinates, and then project the point (2) from camera coordinates down to the image plane."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-30T10:36:20-05:00"><meta property="article:modified_time" content="2023-10-30T10:36:20-05:00"><meta property="article:tag" content="Computational Photography"><meta name=twitter:card content="summary"><meta name=twitter:title content="445_camera"><meta name=twitter:description content="World Coordinates and Image coordinates
Pinhole Camera Model
$$
x = K \left[
\begin{array}{ll}
R & t
\end{array}
\right] x
$$
x: Image Coordinates: $(u, v, 1)$
K: Intrinsic Matrix $(3 \times 3)$
R: Rotation $(3 \times 3)$
t: Translation $(3 \times 1)$
X: World Coordinates: $(X, Y, Z, 1)$
Basically, from the right side to the leftside, it is transforming a point (1) from the world coordinates to camera coordinates, and then project the point (2) from camera coordinates down to the image plane."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ofuro.me/posts/"},{"@type":"ListItem","position":2,"name":"445_camera","item":"https://ofuro.me/posts/445_camera/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"445_camera","name":"445_camera","description":"World Coordinates and Image coordinates Pinhole Camera Model $$ x = K \\left[ \\begin{array}{ll} R \u0026amp; t \\end{array} \\right] x $$\nx: Image Coordinates: $(u, v, 1)$ K: Intrinsic Matrix $(3 \\times 3)$ R: Rotation $(3 \\times 3)$ t: Translation $(3 \\times 1)$ X: World Coordinates: $(X, Y, Z, 1)$\nBasically, from the right side to the leftside, it is transforming a point (1) from the world coordinates to camera coordinates, and then project the point (2) from camera coordinates down to the image plane.\n","keywords":["Computational Photography"],"articleBody":"World Coordinates and Image coordinates Pinhole Camera Model $$ x = K \\left[ \\begin{array}{ll} R \u0026 t \\end{array} \\right] x $$\nx: Image Coordinates: $(u, v, 1)$ K: Intrinsic Matrix $(3 \\times 3)$ R: Rotation $(3 \\times 3)$ t: Translation $(3 \\times 1)$ X: World Coordinates: $(X, Y, Z, 1)$\nBasically, from the right side to the leftside, it is transforming a point (1) from the world coordinates to camera coordinates, and then project the point (2) from camera coordinates down to the image plane.\n(1) is done by the $\\left[\\begin{array}{ll} R \u0026 t \\end{array}\\right]$, the extrinsic matrix (rotation and translation).\n(2) is done by K, the intrinsic/projection matrix.\nThe Intrinsic Matrix How we do the projection?\nFirst, let’s look at this projection from camera coordinate to image plane.\nAn important projection diagram to remember(CS445 Hoiem) In a matrix form, if we set the camera center at $(0, 0, 0)$, this is actually easy to express: $$ K =\\left[\\begin{array}{ccc} f \u0026 0 \u0026 u_0 \\\\ 0 \u0026 f \u0026 v_0 \\\\ 0 \u0026 0 \u0026 1 \\end{array}\\right] $$ Now if we just use the default R and t, the model is: $$ w\\left[\\begin{array}{l} u \\\\ v \\\\ 1 \\end{array}\\right] = \\left[\\begin{array}{cccc} f \u0026 0 \u0026 u_0 \u0026 0\\\\ 0 \u0026 f \u0026 v_0 \u0026 0\\\\ 0 \u0026 0 \u0026 1 \u0026 0 \\end{array}\\right] \\left[\\begin{array}{c} X \\\\ Y \\\\ Z \\\\ 1 \\end{array}\\right] $$ Do some calculation, then you find out that this is exactly the same as the diagram above.\nThe Extrinsic Matrix $$ \\left[\\begin{array}{ll} R \u0026 t \\end{array}\\right] = \\left[\\begin{array}{cccc} r_{11} \u0026 r_{12} \u0026 r_{13} \u0026 t_x \\\\ r_{21} \u0026 r_{22} \u0026 r_{23} \u0026 t_y \\\\ r_{31} \u0026 r_{32} \u0026 r_{33} \u0026 t_z \\end{array}\\right] $$ The R here is the rotation matrix for 3D coordinate. World coordinate $\\xrightarrow{\\text{rotate to }}$ Camera coordinate direction. This R is also orthonormal.\nThe t here traslates the world origin to the camera center.\nIf we know that position $(x, y, z)$ of the camera in the world coordinate, we can also set up this simple equation for calculating R and t. $$ X_c =\\left[\\begin{array}{ll} R \u0026 t \\end{array}\\right]\\left[\\begin{array}{c} X_w \\\\ 1 \\end{array}\\right]=RX_w+t=0 \\\\ $$ The Complete Model $$ x=\\mathbf{K}\\left[\\begin{array}{ll} \\mathbf{R} \u0026 \\mathbf{t} \\end{array}\\right] x \\Rightarrow w\\left[\\begin{array}{l} u \\\\ v \\\\ 1 \\end{array}\\right] =\\left[\\begin{array}{ccc} f \u0026 0 \u0026 u_0 \\\\ 0 \u0026 f \u0026 v_0 \\\\ 0 \u0026 0 \u0026 1 \\end{array}\\right] \\left[\\begin{array}{cccc} r_{11} \u0026 r_{12} \u0026 r_{13} \u0026 t_x \\\\ r_{21} \u0026 r_{22} \u0026 r_{23} \u0026 t_y \\\\ r_{31} \u0026 r_{32} \u0026 r_{33} \u0026 t_z \\end{array}\\right] \\left[\\begin{array}{c} X \\\\ Y \\\\ Z \\\\ 1 \\end{array}\\right] $$ Exercise Take home question 1:\nSuppose the camera axis is in the direction of $(x=0, y=0, z=1)$ in its own coordinate system. What is the camera axis in world coordinates given the extrinsic parameters $R, t$ ?\nSolution\nNote that this is not asking the projection on 2D image, but it is asking: after the rotation what is the direction of this camera?\nLet $X_c$ denote the direction of this camera in its own coordinate. So $X_c=\\left[\\begin{array}{l}0 \\ 0 \\ 1\\end{array}\\right]$ Let $X_w$ denote the direction of this camera in world coordinate. So $\\quad X_w=\\left[\\begin{array}{l}x_w \\ y_w \\ z_w\\end{array}\\right]$ We have equation:\n\\begin{align*} X_c \u0026 =\\left[ \\begin{array}{ll} R \u0026 t \\end{array} \\right] \\left[ \\begin{array}{c} X_w \\\\ 1 \\end{array} \\right] \\\\ X_c \u0026 =R X_w+t \\\\ R X_w \u0026 =X_c-t \\\\ X_w \u0026 =R^{-1}\\left(X_c-t\\right) \\\\ \u0026 =R^{-1} X_c-R^{-1} t\\\\ \u0026 =R^{T} X_c-R^{T} t \\quad \\text { as } R^{-1}=R^{T} \\\\ \\end{align*}\nWhen we consider just the direction, translation doesn’t matter. So: $$ X_w=R^T X_c $$\nExercise Take home question 2:\nSuppose a camera at height $y=h,(x=0, z=0)$ observes a point at $(u, v)$ known to be on the ground $(y=0)$. Assume $R$ is identity. What is the 3D position of the point in terms of $f, u_0, v_0$ ?\nSolution:\nThe camera is at $(x, y, z) = (0, h, 0)$. And since we know that the rotation matrix R is an identity matrix, we can set up an equation to solve for t:\n\\begin{align*} X_{cc} \u0026 =\\left[\\begin{array}{ll} I \u0026 t \\end{array}\\right]\\left[\\begin{array}{c} X_{cw} \\\\ 1 \\end{array}\\right]=X_{cw}+t=0 \\\\ \\Rightarrow t \u0026 =-X_{cw} = \\left[ \\begin{array}{c} 0\\\\ -h\\\\ 0\\\\ \\end{array} \\right] \\end{align*}\nWhere $X_{cc}$ stands for the position of camera at camera coordinate. $X_{cw}$ stands for the position of camera at world coordinate.\nThen, we know that in the camera coordinate, the point is observed at $(u, v)$. This fills in the left side of the Pinhole Camera Model.\nWe want to solve for the position $X_{pw}$ of the point in the world coordinate. We also know that this point is on the ground, so its $y$ value is 0. As we have all the information we want, writing out the formula of the Pinhole Camera Model and we should be able to solve the problem:\n$$ w\\left[\\begin{array}{l} u \\\\ v \\\\ 1 \\end{array}\\right]=\\left[\\begin{array}{lll} f \u0026 0 \u0026 u_0 \\\\ 0 \u0026 f \u0026 v_0 \\\\ 0 \u0026 0 \u0026 1 \\end{array}\\right]\\left[\\begin{array}{cccc} 1 \u0026 0 \u0026 0 \u0026 0 \\\\ 0 \u0026 1 \u0026 0 \u0026 -h \\\\ 0 \u0026 0 \u0026 1 \u0026 0 \\end{array}\\right]\\left[\\begin{array}{c} x_{p m} \\\\ 0_{p m} \\\\ z_{p m} \\\\ 1 \\end{array}\\right] $$ Reference CS445 Derek Hoiem: https://courses.engr.illinois.edu/cs445/fa2023/\n","wordCount":"873","inLanguage":"en","datePublished":"2023-10-30T10:36:20-05:00","dateModified":"2023-10-30T10:36:20-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ofuro.me/posts/445_camera/"},"publisher":{"@type":"Organization","name":"Yue's Notes","logo":{"@type":"ImageObject","url":"https://ofuro.me/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ofuro.me/ accesskey=h title="Yue's Notes (Alt + H)">Yue's Notes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ofuro.me/about title="About Me"><span>About Me</span></a></li><li><a href=https://ofuro.me/archives title=Archive><span>Archive</span></a></li><li><a href=https://ofuro.me/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://ofuro.me/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">445_camera</h1><div class=post-meta><span title='2023-10-30 10:36:20 -0500 -0500'>October 30, 2023</span></div></header><div class=post-content><h1 id=world-coordinates-and-image-coordinates>World Coordinates and Image coordinates<a hidden class=anchor aria-hidden=true href=#world-coordinates-and-image-coordinates>#</a></h1><h2 id=pinhole-camera-model>Pinhole Camera Model<a hidden class=anchor aria-hidden=true href=#pinhole-camera-model>#</a></h2><p>$$
x = K \left[
\begin{array}{ll}
R & t
\end{array}
\right] x
$$</p><p><strong>x</strong>: Image Coordinates: $(u, v, 1)$
<strong>K</strong>: Intrinsic Matrix $(3 \times 3)$
<strong>R</strong>: Rotation $(3 \times 3)$
<strong>t</strong>: Translation $(3 \times 1)$
<strong>X</strong>: World Coordinates: $(X, Y, Z, 1)$</p><p>Basically, from the right side to the leftside, it is transforming a point (1) from the world coordinates to camera coordinates, and then project the point (2) from camera coordinates down to the image plane.</p><p>(1) is done by the $\left[\begin{array}{ll} R & t \end{array}\right]$, the extrinsic matrix (rotation and translation).</p><p>(2) is done by <strong>K</strong>, the intrinsic/projection matrix.</p><h3 id=the-intrinsic-matrix>The Intrinsic Matrix<a hidden class=anchor aria-hidden=true href=#the-intrinsic-matrix>#</a></h3><blockquote><p>How we do the projection?</p></blockquote><p>First, let&rsquo;s look at this projection from camera coordinate to image plane.</p><center><figure><img src=https://raw.githubusercontent.com/helloboyxxx/images-for-notes/master/uPic/image-20231011201407570.png style=width:50%><figcaption>An important projection diagram to remember(CS445 Hoiem)</figcaption></figure></center><p>In a matrix form, if we set the camera center at $(0, 0, 0)$, this is actually easy to express:<div>$$
K =\left[\begin{array}{ccc}
f & 0 & u_0 \\
0 & f & v_0 \\
0 & 0 & 1
\end{array}\right]
$$
</div></p><p>Now if we just use the default <strong>R</strong> and <strong>t</strong>, the model is:<div>$$
w\left[\begin{array}{l}
u \\
v \\
1
\end{array}\right]
= \left[\begin{array}{cccc}
f & 0 & u_0 & 0\\
0 & f & v_0 & 0\\
0 & 0 & 1 & 0
\end{array}\right]
\left[\begin{array}{c}
X \\
Y \\
Z \\
1
\end{array}\right]
$$</div>Do some calculation, then you find out that this is exactly the same as the diagram above.</p><h3 id=the-extrinsic-matrix>The Extrinsic Matrix<a hidden class=anchor aria-hidden=true href=#the-extrinsic-matrix>#</a></h3><center><figure><img src=https://raw.githubusercontent.com/helloboyxxx/images-for-notes/master/uPic/p4JhUy.png style=width:50%><figcaption></figcaption></figure></center><div>$$
\left[\begin{array}{ll} R & t \end{array}\right] = \left[\begin{array}{cccc}
r_{11} & r_{12} & r_{13} & t_x \\
r_{21} & r_{22} & r_{23} & t_y \\
r_{31} & r_{32} & r_{33} & t_z
\end{array}\right]
$$</div><p>The <strong>R</strong> here is the rotation matrix for 3D coordinate. World coordinate $\xrightarrow{\text{rotate to }}$ Camera coordinate direction. This <strong>R</strong> is also orthonormal.</p><p>The <strong>t</strong> here traslates the world origin to the camera center.</p><p>If we know that position $(x, y, z)$ of the camera in the world coordinate, we can also set up this simple equation for calculating <strong>R</strong> and <strong>t</strong>.<div>$$
X_c =\left[\begin{array}{ll}
R & t
\end{array}\right]\left[\begin{array}{c}
X_w \\
1
\end{array}\right]=RX_w+t=0 \\
$$</div></p><h3 id=the-complete-model>The Complete Model<a hidden class=anchor aria-hidden=true href=#the-complete-model>#</a></h3><div>$$
x=\mathbf{K}\left[\begin{array}{ll}
\mathbf{R} & \mathbf{t}
\end{array}\right] x \Rightarrow
w\left[\begin{array}{l}
u \\
v \\
1
\end{array}\right]
=\left[\begin{array}{ccc}
f & 0 & u_0 \\
0 &  f & v_0 \\
0 & 0 & 1
\end{array}\right]
\left[\begin{array}{cccc}
r_{11} & r_{12} & r_{13} & t_x \\
r_{21} & r_{22} & r_{23} & t_y \\
r_{31} & r_{32} & r_{33} & t_z
\end{array}\right]
\left[\begin{array}{c}
X \\
Y \\
Z \\
1
\end{array}\right]
$$</div><hr><p><span style=color:#04c2b2>Exercise</span> Take home question 1:</p><p>Suppose the camera axis is in the direction of $(x=0, y=0, z=1)$ in its own coordinate system. What is the camera axis in world coordinates given the extrinsic parameters $R, t$ ?</p><p><span style=color:#ff6759>Solution</span></p><p>Note that this is not asking the projection on 2D image, but it is asking: after the rotation what is the direction of this camera?</p><p>Let $X_c$ denote the direction of this camera in its own coordinate.
So $X_c=\left[\begin{array}{l}0 \ 0 \ 1\end{array}\right]$
Let $X_w$ denote the direction of this camera in world coordinate.
So $\quad X_w=\left[\begin{array}{l}x_w \ y_w \ z_w\end{array}\right]$
We have equation:</p><p><code>\begin{align*} X_c & =\left[ \begin{array}{ll} R & t \end{array} \right] \left[ \begin{array}{c} X_w \\ 1 \end{array} \right] \\ X_c & =R X_w+t \\ R X_w & =X_c-t \\ X_w & =R^{-1}\left(X_c-t\right) \\ & =R^{-1} X_c-R^{-1} t\\ & =R^{T} X_c-R^{T} t \quad \text { as } R^{-1}=R^{T} \\ \end{align*}</code></p><p>When we consider just the direction, translation doesn&rsquo;t matter. So:
$$
X_w=R^T X_c
$$</p><p><span style=color:#04c2b2>Exercise</span> Take home question 2:</p><p>Suppose a camera at height $y=h,(x=0, z=0)$ observes a point at $(u, v)$ known to be on the ground $(y=0)$. Assume $R$ is identity. What is the 3D position of the point in terms of $f, u_0, v_0$ ?</p><p><strong>Solution:</strong></p><p>The camera is at $(x, y, z) = (0, h, 0)$. And since we know that the rotation matrix <strong>R</strong> is an identity matrix, we can set up an equation to solve for <strong>t</strong>:</p><p><code>\begin{align*} X_{cc} & =\left[\begin{array}{ll} I & t \end{array}\right]\left[\begin{array}{c} X_{cw} \\ 1 \end{array}\right]=X_{cw}+t=0 \\ \Rightarrow t & =-X_{cw} = \left[ \begin{array}{c} 0\\ -h\\ 0\\ \end{array} \right] \end{align*}</code></p><p>Where $X_{cc}$ stands for the position of camera at camera coordinate. $X_{cw}$ stands for the position of camera at world coordinate.</p><p>Then, we know that in the camera coordinate, the point is observed at $(u, v)$. This fills in the left side of the Pinhole Camera Model.</p><p>We want to solve for the position $X_{pw}$ of the point in the world coordinate. We also know that this point is on the ground, so its $y$ value is 0. As we have all the information we want, writing out the formula of the Pinhole Camera Model and we should be able to solve the problem:</p><div>$$
w\left[\begin{array}{l}
u \\
v \\
1
\end{array}\right]=\left[\begin{array}{lll}
f & 0 & u_0 \\
0 & f & v_0 \\
0 & 0 & 1
\end{array}\right]\left[\begin{array}{cccc}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & -h \\
0 & 0 & 1 & 0
\end{array}\right]\left[\begin{array}{c}
x_{p m} \\
0_{p m} \\
z_{p m} \\
1
\end{array}\right]
$$</div><h3 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h3><p>CS445 Derek Hoiem: <a href=https://courses.engr.illinois.edu/cs445/fa2023/>https://courses.engr.illinois.edu/cs445/fa2023/</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://ofuro.me/tags/computational-photography/>Computational Photography</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://ofuro.me/>Yue's Notes</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>